### Variables
### NOTE: Token is automatically synced from token.txt
### To update: Run 'php routes/tests/scripts/update_token.php' or use VS Code task "Update Token in HTTP Test Files"
@baseUrl = http://localhost:8000
@apiUrl = {{baseUrl}}/api/v1/management/app-module-management/app-modules
@token = 
### ============================================

### Get all app modules (Index)
GET {{apiUrl}}
Authorization: Bearer {{token}}
Content-Type: application/json

### Get all app modules with pagination
GET {{apiUrl}}?per_page=10&page=1
Authorization: Bearer {{token}}
Content-Type: application/json

### Get all app modules with search filter
GET {{apiUrl}}?search=admin
Authorization: Bearer {{token}}
Content-Type: application/json

### Get all app modules with status filter
GET {{apiUrl}}?status=1
Authorization: Bearer {{token}}
Content-Type: application/json

### Get all app modules with custom fields
GET {{apiUrl}}?fields[]=id&fields[]=title&fields[]=status
Authorization: Bearer {{token}}
Content-Type: application/json

### Get all app modules with ordering
GET {{apiUrl}}?orderByCol=title&orderByAsc=1
Authorization: Bearer {{token}}
Content-Type: application/json

### Get all app modules with conditions
GET {{apiUrl}}?conditions[status]=1&conditions[creator]=1
Authorization: Bearer {{token}}
Content-Type: application/json

### Get a specific app module by ID
GET {{apiUrl}}/1
Authorization: Bearer {{token}}
Content-Type: application/json

### Create a new app module (Store)
POST {{apiUrl}}/store
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "title": "Dashboard Module",
    "status": 1
}

### Create a new app module - Inactive
POST {{apiUrl}}/store
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "title": "Reports Module",
    "status": 0
}

### Update an app module
POST {{apiUrl}}/update
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "id": 1,
    "title": "Updated Dashboard Module",
    "status": 1
}

### Soft delete an app module (Set status to 0)
POST {{apiUrl}}/soft-delete
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "id": 1
}

### Restore an app module (Set status to 1)
POST {{apiUrl}}/restore
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "id": 1
}

### Permanently delete an app module (Destroy)
POST {{apiUrl}}/destroy
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "id": 1
}

### Import multiple app modules
POST {{apiUrl}}/import
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "data": [
        {
            "title": "User Management Module",
            "status": 1
        },
        {
            "title": "Settings Module",
            "status": 1
        },
        {
            "title": "Analytics Module",
            "status": 0
        }
    ]
}

### Get analytics data
GET {{apiUrl}}/analytics
Authorization: Bearer {{token}}
Content-Type: application/json

### ============================================
### TEST SCENARIOS
### ============================================

### Test: Create app module without title (Validation Error)
POST {{apiUrl}}/store
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "status": 1
}

### Test: Create app module with invalid status (Validation Error)
POST {{apiUrl}}/store
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "title": "Test Module",
    "status": 2
}

### Test: Create app module with title exceeding max length (Validation Error)
POST {{apiUrl}}/store
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "title": "This is a very long title that exceeds the maximum allowed length of 100 characters and should trigger a validation error",
    "status": 1
}

### Test: Update app module with non-existent ID (404 Error)
POST {{apiUrl}}/update
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "id": 99999,
    "title": "Non-existent Module",
    "status": 1
}

### Test: Update app module without ID (Validation Error)
POST {{apiUrl}}/update
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "title": "Updated Module",
    "status": 1
}

### Test: Get app module with non-existent ID (404 Error)
GET {{apiUrl}}/99999
Authorization: Bearer {{token}}
Content-Type: application/json

### Test: Soft delete with non-existent ID (404 Error)
POST {{apiUrl}}/soft-delete
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "id": 99999
}

### Test: Restore with non-existent ID (404 Error)
POST {{apiUrl}}/restore
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "id": 99999
}

### Test: Destroy with non-existent ID (404 Error)
POST {{apiUrl}}/destroy
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "id": 99999
}

### Test: Import with invalid data structure (Validation Error)
POST {{apiUrl}}/import
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "data": [
        {
            "status": 1
        }
    ]
}

### Test: Import with missing title (Validation Error)
POST {{apiUrl}}/import
Authorization: Bearer {{token}}
Content-Type: application/json

{
    "data": [
        {
            "title": "Valid Module",
            "status": 1
        },
        {
            "status": 1
        }
    ]
}

### Test: Access endpoint without token (401 Error)
GET {{apiUrl}}
Content-Type: application/json

### Test: Access endpoint with invalid token (401 Error)
GET {{apiUrl}}
Authorization: Bearer invalid_token_here
Content-Type: application/json
