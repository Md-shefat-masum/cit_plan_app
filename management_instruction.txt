# Management Module Creation Instructions
# ======================================
# This file contains instructions for creating a new management module.
# Replace all placeholders with actual values before using.

# ======================================
# PLACEHOLDERS TO REPLACE
# ======================================
# [AppModuleSubModuleEndpoint] - Name of the management module (e.g., UserRole, Product, Category)
# [app_module_sub_module_endpoint] - Lowercase version (e.g., user_role, product, category)
# [AppModuleSubModuleEndpoints] - Plural form (e.g., UserRoles, Products, Categories)
# [app_module_sub_module_endpoints] - Plural lowercase (e.g., user_roles, products, categories)
# [app_module_sub_module_endpoints] - Database table name (e.g., user_roles, products, categories)
# [app-module-sub-module-enpoints] - Route prefix (e.g., user-roles, products, categories)
# [app/Http/Controllers/Management/V1/UserManagement/AppModuleSubModuleEndpoint/AppModuleSubModuleEndpointController] - Full controller namespace path
# [app/Http/Actions/UserManagement/AppModuleSubModuleEndpoint] - Full action namespace path
# [app/Models/UserManagement] - Full model namespace path
# [user-management] - route parent management

# Example replacements:
# [AppModuleSubModuleEndpoint] = UserRole
# [app_module_sub_module_endpoint] = user_role
# [AppModuleSubModuleEndpoints] = UserRoles
# [app_module_sub_module_endpoints] = user_roles
# [app_module_sub_module_endpoints] = user_roles
# [app-module-sub-module-enpoints] = user-roles
# [app/Http/Controllers/Management/V1/UserManagement/AppModuleSubModuleEndpoint/AppModuleSubModuleEndpointController] = Management\V1\UserManagement\UserRole
# [app/Http/Actions/UserManagement/AppModuleSubModuleEndpoint] = UserManagement\UserRole
# [app/Models/UserManagement] = UserManagement\UserRole

# ======================================
# STEP 1: MODEL CREATION
# ======================================
# Create model: app/Models/[app/Models/UserManagement]/[AppModuleSubModuleEndpoint].php

# Model Structure:
# - Namespace: App\Models\[app/Models/UserManagement]
# - Class name: [AppModuleSubModuleEndpoint]
# - Table: [app_module_sub_module_endpoints]
# - Fillable fields: [LIST ALL FILLABLE FIELDS]
# - Relationships: [DEFINE RELATIONSHIPS]

# Example:
# namespace App\Models\UserManagement\UserRole;
# class UserRole extends Model
# {
#     protected $table = 'user_roles';
#     protected $fillable = ['title', 'status', 'slug', 'creator'];
#     public function users(): HasMany { ... }
# }

# ======================================
# STEP 2: MIGRATION CREATION
# ======================================
# Create migration: database/migrations/YYYY_MM_DD_HHMMSS_create_[app_module_sub_module_endpoints]_table.php

# Migration Structure:
# - Table name: [app_module_sub_module_endpoints]
# - Required fields:
#   * id (primary key)
#   * app_module_id (bigint unsigned)
#   * app_module_sub_module_id (bigint unsigned)
#   * uri (string 200)
#   * action_key (string 100)
#   * status (tinyInteger, default 1)
#   * slug (string, unique, nullable)
#   * creator (bigInteger, default 0)
#   * timestamps (created_at, updated_at)


# ======================================
# STEP 3: CONTROLLER CREATION
# ======================================
# Create controller: app/Http/Controllers/[app/Http/Controllers/Management/V1/UserManagement/AppModuleSubModuleEndpoint/AppModuleSubModuleEndpointController]/[AppModuleSubModuleEndpoint]Controller.php

# Controller Structure:
# - Namespace: App\Http\Controllers\[app/Http/Controllers/Management/V1/UserManagement/AppModuleSubModuleEndpoint/AppModuleSubModuleEndpointController]
# - Class name: [AppModuleSubModuleEndpoint]Controller
# - Extends: Controller
# - Properties:
#   * protected $model = [AppModuleSubModuleEndpoint]::class;
#   * protected $table_name = '[app_module_sub_module_endpoints]';
# - Methods:
#   * index() - List all records
#   * store() - Create new record
#   * show($id) - Get single record
#   * update() - Update record
#   * soft_delete() - Soft delete (status = 0)
#   * restore() - Restore (status = 1)
#   * destroy() - Permanently delete
#   * import() - Bulk import
#   * analytics() - Get analytics

# Controller Pattern:
# 1. Validation in controller
# 2. Call action execute() method
# 3. Return api_response() with data

# ======================================
# STEP 4: ACTION FILES CREATION
# ======================================
# Create actions directory: app/Http/Actions/[app/Http/Actions/UserManagement/AppModuleSubModuleEndpoint]/

# Required Action Files:
# 1. [AppModuleSubModuleEndpoint]IndexAction.php - List with filters, pagination, search
# 2. [AppModuleSubModuleEndpoint]StoreAction.php - Create new record
# 3. [AppModuleSubModuleEndpoint]ShowAction.php - Get single record
# 4. [AppModuleSubModuleEndpoint]UpdateAction.php - Update record
# 5. [AppModuleSubModuleEndpoint]SoftDeleteAction.php - Soft delete
# 6. [AppModuleSubModuleEndpoint]RestoreAction.php - Restore record
# 7. [AppModuleSubModuleEndpoint]DestroyAction.php - Permanently delete
# 8. [AppModuleSubModuleEndpoint]ImportAction.php - Bulk import
# 9. [AppModuleSubModuleEndpoint]AnalyticsAction.php - Analytics data

# Action File Pattern:
# - Namespace: App\Http\Actions\[app/Http/Actions/UserManagement/AppModuleSubModuleEndpoint]
# - Class name: [AppModuleSubModuleEndpoint][ActionName]Action
# - Method: public static function execute($model, $table_name, ...$params)
# - No handle() method, only execute()

# ======================================
# STEP 5: INDEX ACTION DETAILS
# ======================================
# File: [AppModuleSubModuleEndpoint]IndexAction.php

# Required Features:
# 1. Dynamic fields selection with table prefixing
# 2. Relations support (request()->relations)
# 3. Conditions support (request()->conditions)
# 4. Pagination (request()->paginate)
# 5. Search functionality (request()->search)
# 6. Ordering (request()->orderByCol, request()->orderByAsc)
# 7. Status filtering (request()->status)
# 8. Auth-based filtering (if needed)
# 9. Eager loading relations

# Default Fields:
# - id
# - app_module_id
# - title
# - creator
# - slug
# - status
# - created_at
# - updated_at

# Search Fields:
# - Add all searchable fields in the search block
# - Use table prefix for all fields
# - app_modules.title
# - Support JSON field searching if needed

# ======================================
# STEP 6: ROUTES SETUP
# ======================================
# File: routes/api.php

# Route Pattern:
# Route::group(['prefix' => '[app-module-sub-module-enpoints]'], function () {
#     common_routes(Route::class, 'App\Http\Controllers\[app/Http/Controllers/Management/V1/UserManagement/AppModuleSubModuleEndpoint/AppModuleSubModuleEndpointController]\[AppModuleSubModuleEndpoint]Controller');
#     // extra routes will go here
# });

# Route Location:
# - Inside: Route::group(['prefix' => 'v1'], function () {
# - Inside: Route::group(['middleware' => 'api.auth'], function () {
# - Inside: Route::group(['prefix' => 'management'], function () {
# - Inside: Route::group(['prefix' => '[user-management]'], function () {

# Example:
# Route::group(['prefix' => 'user-management'], function () {
#     Route::group(['prefix' => 'user-roles'], function () {
#         common_routes(Route::class, 'App\Http\Controllers\Management\V1\UserManagement\UserRole\UserRoleController');
#     });
# });

# ======================================
# STEP 7: VALIDATION RULES
# ======================================
# Define validation rules for each controller method:

# store() validation:
# - [FIELD_NAME] => 'required|string|max:100'
# - status => 'nullable|integer|in:0,1'
# - [ADD OTHER VALIDATION RULES]

# update() validation:
# - id => 'required|integer|exists:[app_module_sub_module_endpoints],id'
# - [FIELD_NAME] => 'required|string|max:100'
# - status => 'nullable|integer|in:0,1'
# - [ADD OTHER VALIDATION RULES]

# soft_delete() validation:
# - id => 'required|integer|exists:[app_module_sub_module_endpoints],id'

# restore() validation:
# - id => 'required|integer|exists:[app_module_sub_module_endpoints],id'

# destroy() validation:
# - id => 'required|integer|exists:[app_module_sub_module_endpoints],id'

# import() validation:
# - data => 'required|array'
# - data.*.[FIELD_NAME] => 'required|string|max:100'
# - data.*.status => 'nullable|integer|in:0,1'

# ======================================
# STEP 8: RELATIONSHIPS
# ======================================
# Define relationships in Model:
belongsTo : AppModule -> app_module_id
belongsTo : AppModuleSubModule -> app_module_sub_module_id

# ======================================
# STEP 9: HELPER FUNCTIONS
# ======================================
# Use api_response() helper from: app/Http/Helpers/ApiHelpers.php

# Usage:
# api_response($data, $message, $code)

# Response codes:
# - 200: Success
# - 201: Created
# - 404: Not Found
# - 422: Validation Error
# - 500: Server Error

# ======================================
# STEP 10: NAMING CONVENTIONS
# ======================================

# Files:
# - Model: [AppModuleSubModuleEndpoint].php (PascalCase)
# - Controller: [AppModuleSubModuleEndpoint]Controller.php (PascalCase)
# - Actions: [AppModuleSubModuleEndpoint][ActionName]Action.php (PascalCase)
# - Migration: create_[app_module_sub_module_endpoints]_table.php (snake_case)

# Classes:
# - Model: [AppModuleSubModuleEndpoint] (PascalCase)
# - Controller: [AppModuleSubModuleEndpoint]Controller (PascalCase)
# - Actions: [AppModuleSubModuleEndpoint][ActionName]Action (PascalCase)

# Variables:
# - Table name: [app_module_sub_module_endpoints] (snake_case)
# - Route prefix: [app-module-sub-module-enpoints] (kebab-case)
# - Model property: $model (camelCase)
# - Table property: $table_name (snake_case)

# ======================================
# STEP 11: DIRECTORY STRUCTURE
# ======================================

# app/
#   Http/
#     Actions/
#       [app/Http/Actions/UserManagement/AppModuleSubModuleEndpoint]/
#         [AppModuleSubModuleEndpoint]IndexAction.php
#         [AppModuleSubModuleEndpoint]StoreAction.php
#         [AppModuleSubModuleEndpoint]ShowAction.php
#         [AppModuleSubModuleEndpoint]UpdateAction.php
#         [AppModuleSubModuleEndpoint]SoftDeleteAction.php
#         [AppModuleSubModuleEndpoint]RestoreAction.php
#         [AppModuleSubModuleEndpoint]DestroyAction.php
#         [AppModuleSubModuleEndpoint]ImportAction.php
#         [AppModuleSubModuleEndpoint]AnalyticsAction.php
#     Controllers/
#       Management/
#         V1/
#           [app/Http/Controllers/Management/V1/UserManagement/AppModuleSubModuleEndpoint/AppModuleSubModuleEndpointController]/
#             [AppModuleSubModuleEndpoint]Controller.php
#   Models/
#     [app/Models/UserManagement]/
#       [AppModuleSubModuleEndpoint].php

# database/
#   migrations/
#     YYYY_MM_DD_HHMMSS_create_[app_module_sub_module_endpoints]_table.php

# routes/
#   api.php (add routes here)

# ======================================
# STEP 12: EXECUTION ORDER
# ======================================

# 1. Create Migration
#    - Run: php artisan make:migration create_[app_module_sub_module_endpoints]_table
#    - Define table structure
#    - Run: php artisan migrate

# 2. Create Model
#    - Run: php artisan make:model [app/Models/UserManagement]/[AppModuleSubModuleEndpoint]
#    - Define fillable fields
#    - Define relationships

# 3. Create Controller Directory
#    - Create: app/Http/Controllers/[app/Http/Controllers/Management/V1/UserManagement/AppModuleSubModuleEndpoint/AppModuleSubModuleEndpointController]/

# 4. Create Controller
#    - Create: [AppModuleSubModuleEndpoint]Controller.php
#    - Add all methods with validation

# 5. Create Actions Directory
#    - Create: app/Http/Actions/[app/Http/Actions/UserManagement/AppModuleSubModuleEndpoint]/

# 6. Create All Action Files
#    - Create 9 action files
#    - Implement execute() methods

# 7. Update Routes
#    - Add route group in routes/api.php
#    - Use common_routes() function

# 8. Test
#    - Test all endpoints
#    - Verify validation
#    - Check relationships

# ======================================
# STEP 13: COMMON PATTERNS
# ======================================

# Store Action Pattern:
# - Generate slug: uniqid()
# - Set creator: auth('api')->id() ?? 0
# - Set default status: 1
# - Create record
# - Return created record

# Update Action Pattern:
# - Find record by id
# - Check if exists
# - Update record
# - Return fresh record

# Soft Delete Pattern:
# - Find record by id
# - Check if exists
# - Update status to 0
# - Return fresh record

# Restore Pattern:
# - Find record by id
# - Check if exists
# - Update status to 1
# - Return fresh record

# Destroy Pattern:
# - Find record by id
# - Check if exists
# - Delete record
# - Return success message

# Import Pattern:
# - Loop through data array
# - Generate slug for each item
# - Set creator for each item
# - Set default status
# - Create each record
# - Return array of created records

# Analytics Pattern:
# - Count total records
# - Count active records (status = 1)
# - Count inactive records (status = 0)
# - Return array with counts

# ======================================
# STEP 14: INDEX ACTION SEARCH PATTERN
# ======================================

# Search should include all searchable fields:
# - Text fields
# - String fields
# - JSON fields (if applicable)
# - Related table fields (if joined)

# Pattern:
# if ($search) {
#     $query->where(function ($query) use ($search, $table_name) {
#         $query
#             ->where("$table_name.[FIELD1]", 'like', "%{$search}%")
#             ->orWhere("$table_name.[FIELD2]", 'like', "%{$search}%")
#             ->orWhere("$table_name.[FIELD3]", 'like', "%{$search}%");
#     });
# }

# ======================================
# STEP 15: AUTH FILTERING (IF NEEDED)
# ======================================

# Add auth-based filtering in IndexAction if required:

# Pattern:
# $auth_user = Auth::guard('api')->user();
# if ($auth_user) {
#     // Add filtering logic based on user role/permissions
#     // Example: $query->where("$table_name.creator", $auth_user->id);
# }

# api_tests = [app_module_sub_module_endpoints]_test.http follow routes/tests/role_test.http

# ======================================
# STEP 16: RELATIONS IN INDEX ACTION
# ======================================

# Add default relations in IndexAction:
belongsTo -> app_modules.id , app_module_id

# Pattern:
# $query->with([
# ]);

# ======================================
# NOTES
# ======================================

# - Always use table prefixing for fields in queries
# - Always validate input in controller
# - Always handle exceptions with try-catch
# - Always return proper HTTP status codes
# - Always use api_response() helper
# - Always prefix table names in where clauses
# - Always use Str::contains() to check field prefixes
# - Always use request() helper instead of Request parameter in actions
# - Always use static methods in actions
# - Always pass model and table_name from controller to actions

# ======================================
# QUICK REFERENCE EXAMPLE
# ======================================

# Example: Creating a "Product" management module

# Replacements:
# [AppModuleSubModuleEndpoint] = Product
# [app_module_sub_module_endpoint] = product
# [AppModuleSubModuleEndpoints] = Products
# [app_module_sub_module_endpoints] = products
# [app_module_sub_module_endpoints] = products
# [app-module-sub-module-enpoints] = products
# [app/Http/Controllers/Management/V1/UserManagement/AppModuleSubModuleEndpoint/AppModuleSubModuleEndpointController] = Management\V1\ProductManagement\Product
# [app/Http/Actions/UserManagement/AppModuleSubModuleEndpoint] = ProductManagement\Product
# [app/Models/UserManagement] = ProductManagement\Product

# Files to create:
# 1. app/Models/ProductManagement/Product/Product.php
# 2. database/migrations/YYYY_MM_DD_HHMMSS_create_products_table.php
# 3. app/Http/Controllers/Management/V1/ProductManagement/Product/ProductController.php
# 4. app/Http/Actions/ProductManagement/Product/ProductIndexAction.php
# 5. app/Http/Actions/ProductManagement/Product/ProductStoreAction.php
# 6. app/Http/Actions/ProductManagement/Product/ProductShowAction.php
# 7. app/Http/Actions/ProductManagement/Product/ProductUpdateAction.php
# 8. app/Http/Actions/ProductManagement/Product/ProductSoftDeleteAction.php
# 9. app/Http/Actions/ProductManagement/Product/ProductRestoreAction.php
# 10. app/Http/Actions/ProductManagement/Product/ProductDestroyAction.php
# 11. app/Http/Actions/ProductManagement/Product/ProductImportAction.php
# 12. app/Http/Actions/ProductManagement/Product/ProductAnalyticsAction.php

# Route to add in routes/api.php:
# Route::group(['prefix' => 'product-management'], function () {
#     Route::group(['prefix' => 'products'], function () {
#         common_routes(Route::class, 'App\Http\Controllers\Management\V1\ProductManagement\Product\ProductController');
#     });
# });

# ======================================
# TEMPLATE CHECKLIST
# ======================================

# Before asking AI to create a module, fill this checklist:

# [ ] Module Name: ______________
# [ ] Table Name: _______________
# [ ] Route Prefix: _______________
# [ ] Controller Namespace: _______________
# [ ] Action Namespace: _______________
# [ ] Model Namespace: _______________
# [ ] Fields List: _______________
# [ ] Searchable Fields: _______________
# [ ] Relationships: _______________
# [ ] Validation Rules: _______________
# [ ] Auth Filtering Needed: Yes/No
# [ ] Default Relations: _______________

# ======================================
# END OF INSTRUCTIONS
# ======================================
